---
- name: Only run on macOS
  meta: end_host
  when: ansible_system != "Darwin"

- name: Ensure MesloLGS NF fonts directory exists
  file:
    path: "{{ lookup('env','HOME') }}/Library/Fonts"
    state: directory

- name: Install MesloLGS Nerd Fonts (4 styles)
  get_url:
    url: "{{ item.url }}"
    dest: "{{ lookup('env','HOME') }}/Library/Fonts/{{ item.name }}"
    mode: "0644"
  loop:
    - { name: "MesloLGS NF Regular.ttf", url: "https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS%20NF%20Regular.ttf" }
    - { name: "MesloLGS NF Bold.ttf",    url: "https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS%20NF%20Bold.ttf" }
    - { name: "MesloLGS NF Italic.ttf",  url: "https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS%20NF%20Italic.ttf" }
    - { name: "MesloLGS NF Bold Italic.ttf", url: "https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS%20NF%20Bold%20Italic.ttf" }

- name: Show post-steps for iTerm2 import (use assets from ~/.config/iterm)
  debug:
    msg: |
      iTerm setup (manual import from ~/.config/iterm):
        1) Profile JSON: Preferences → Profiles → Other Actions (gear) → Import JSON…
           Import: ~/.config/iterm/suhail-iterm-profile.json  (set as Default)
        2) Colors: Preferences → Profiles → Colors → Color Presets… → Import…
           Import:
             - ~/.config/iterm/catppuccin-latte-mocha.itermcolors
             - ~/.config/iterm/catppuccin-mocha_dark.itermcolors
        3) Keys: Preferences → Keys → Key Bindings → Presets… → Import…
           Import: ~/.config/iterm/suhail-nvim-tmux.itermkeymap
