- name: Ensure MesloLGS NF fonts directory exists
  file:
    path: "{{ lookup('env','HOME') }}/Library/Fonts"
    state: directory

- name: Install MesloLGS Nerd Fonts (4 styles)
  get_url:
    url: "{{ item.url }}"
    dest: "{{ lookup('env','HOME') }}/Library/Fonts/{{ item.name }}"
    mode: "0644"
  loop:
    - { name: "MesloLGS NF Regular.ttf", url: "https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS%20NF%20Regular.ttf" }
    - { name: "MesloLGS NF Bold.ttf", url: "https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS%20NF%20Bold.ttf" }
    - { name: "MesloLGS NF Italic.ttf", url: "https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS%20NF%20Italic.ttf" }
    - { name: "MesloLGS NF Bold Italic.ttf", url: "https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS%20NF%20Bold%20Italic.ttf" }

# --- Download iTerm assets to ~/Downloads for manual import ---
- name: Ensure iTerm downloads dir exists
  file:
    path: "{{ iterm_download_dir | default(lookup('env','HOME') + '/Downloads') }}"
    state: directory
    mode: "0755"

- name: Download iTerm2 profile (JSON)
  get_url:
    url: "{{ iterm_profile_json_url }}"
    dest: "{{ iterm_download_dir }}/suhail-iterm-profile.json"
    mode: "0644"

- name: Download iTerm2 keymap (preset)
  get_url:
    url: "{{ iterm_keymap_url }}"
    dest: "{{ iterm_download_dir }}/suhail-nvim-tmux.itermkeymap"
    mode: "0644"

- name: Download iTerm2 color presets (light & dark)
  get_url:
    url: "{{ item }}"
    dest: "{{ iterm_download_dir }}/{{ item | basename }}"
    mode: "0644"
  loop: "{{ iterm_color_preset_urls }}"

- name: Show post-steps for iTerm2 import (4 items)
  debug:
    msg: |
      iTerm setup (manual import):
        1) Profile: Preferences → Profiles → Other Actions (gear) → Import JSON…
           Import: ~/Downloads/suhail-iterm-profile.json
           Then set it as Default.
        2) Colors: Preferences → Profiles → Colors → Color Presets… → Import…
           Import both:
             - catppuccin-latte-mocha.itermcolors  (light)
             - catppuccin-mocha_dark.itermcolors  (dark)
           Pick the one you want active for the profile.
        3) Key Bindings: Preferences → Keys → Key Bindings → Presets… → Import…
           Import: ~/Downloads/suhail-nvim-tmux.itermkeymap
           Then select that preset.
        4) Fonts are installed already (MesloLGS NF Regular/Bold/Italic/Bold Italic).
