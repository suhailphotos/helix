# playbooks/linux_remote.yml
- name: Bootstrap Linux basics (Ubuntu/Debian) remotely
  hosts: linux
  gather_facts: yes
  become: yes    # root for system packages, locales, etc.

  roles:
    - { role: linux_bootstrap,   tags: ['linux_bootstrap','bootstrap'] }

    # Full config (Bindu repo) for normal machines
    - { role: bindu_config_repo, when: not (use_selective_configs | default(false)) | bool, tags: ['bindu','config'] }

    # Selective files for lightweight machines
    - { role: bindu_selective,   when: (use_selective_configs | default(false)) | bool,     tags: ['bindu','config'] }

    # ZSH / Orbit only on dev boxes (run as user for dotfiles/clone)
    - { role: orbit,
        when: (use_zsh_shell | default(false)) | bool,
        tags: ['orbit'],
        become: false }

    - { role: zsh_orbit,
        when: (use_zsh_shell | default(false)) | bool,
        tags: ['zsh','orbit'],
        become: false }

    # Shell-agnostic bits (OK on bash or zsh)
    - { role: zoxide,            tags: ['zoxide'] }
    - { role: starship,          tags: ['starship','prompt'] }
    - { role: home_shims,        tags: ['home','dotfiles'] }
    - { role: bash_starship,     tags: ['starship','bash'] }
    - { role: eza,               tags: ['eza'] }
    - { role: yazi,              tags: ['yazi'] }
    - { role: tmux_setup,        tags: ['tmux'] }
    - { role: pixi,              tags: ['pixi'] }
    - { role: uv,                tags: ['uv'] }
    - { role: cargo_crates,      tags: ['cargo'] }

    # NVIM: full on normal boxes, selective on lightweight
    - { role: nvim,              when: not (use_selective_configs | default(false)) | bool, tags: ['nvim'] }
    - { role: nvim_selective,    when: (use_selective_configs | default(false)) | bool,     tags: ['nvim'] }

    - { role: atrium_stow,       tags: ['atrium','stow'] }
