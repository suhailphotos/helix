- name: Bootstrap macOS locally
  hosts: macos
  connection: local
  gather_facts: yes
  serial: 1

  pre_tasks:
    - name: Skip other hosts when running locally
      meta: end_host
      when:
        - ansible_connection == 'local'
        - (ansible_hostname | lower) != (inventory_hostname | lower)

  roles:
    - { role: macos_bootstrap,        tags: ['bootstrap'] }
    - { role: zoxide,                 tags: ['zoxide'] }
    - { role: bindu_config_repo,      tags: ['config','bindu'] }
    - { role: orbit,                  tags: ['orbit'] }
    - { role: zsh_orbit,              tags: ['zsh','orbit'] }
    - { role: starship,               tags: ['starship','prompt'] }
    - { role: ghostty,                tags: ['ghostty'] }
    - { role: iterm,                  tags: ['iterm'] }
    - { role: pixi,                   tags: ['pixi'] }
    - { role: python_toolchain,       tags: ['python'] }
    - { role: nvim,                   tags: ['nvim'] }
    - { role: home_shims,             tags: ['home','dotfiles'] }
    - { role: tmux_setup,             tags: ['tmux'] }
    - { role: eza,                    tags: ['eza'] }
    - { role: yazi,                   tags: ['yazi'] }
    - { role: apple_sf_fonts,         when: (enable_sf_fonts | default(false)) | bool, tags: ['fonts'] }
    - { role: uv,                     tags: ['uv'] }
    - { role: cargo_crates,           tags: ['cargo'] }
    - { role: macos_scratch,          tags: ['scratch','screencapture'] }
    - { role: atrium_stow, tags: ['atrium','stow'] }
